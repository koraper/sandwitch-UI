<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>새 과제 생성 - 샌드위치</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/components.css">
</head>

<body class="full-page-body">
    <!-- 새 과제 생성 페이지 -->
    <div class="admin-container full-page">
        <!-- 헤더 -->
        <header class="admin-header">
            <div class="header-left">
                <a href="admin.html" class="logo">
                    <i class="fas fa-hamburger"></i> 샌드위치
                </a>
                <button class="btn-back" onclick="window.location.href='admin.html'">
                    <i class="fas fa-arrow-left"></i> 뒤로가기
                </button>
            </div>
            <div class="header-center">
                <h1 class="admin-title">새 과제 생성</h1>
            </div>
            <div class="header-right">
                <!-- 헤더 우측 영역 -->
            </div>
        </header>

        <!-- 메인 컨텐츠 영역 -->
        <div class="admin-main">
            <!-- 컨텐츠 영역 (사이드바 없이 전체 너비) -->
            <main class="admin-content" style="width: 100%;">
                <div class="content-wrapper">
                    <form id="assignmentForm" class="assignment-form">
                        <!-- 탭 네비게이션 -->
                        <div class="form-tabs">
                            <button type="button" class="form-tab active" data-tab="metadata">
                                <i class="fas fa-file-alt"></i> 과제 메타데이터
                            </button>
                            <button type="button" class="form-tab" data-tab="task">
                                <i class="fas fa-tasks"></i> 과제 정보
                            </button>
                            <button type="button" class="form-tab" data-tab="scoring">
                                <i class="fas fa-lightbulb"></i> 채점 팁
                            </button>
                            <button type="button" class="form-tab" data-tab="sessions">
                                <i class="fas fa-comments"></i> 세션 정보
                            </button>
                            <button type="button" class="form-tab" data-tab="preview">
                                <i class="fas fa-code"></i> JSON 미리보기
                            </button>
                        </div>

                        <!-- 과제 메타데이터 섹션 -->
                        <div class="form-tab-content active" id="tab-metadata">
                            <div class="form-section">
                                <div class="form-grid">
                                <div class="form-group">
                                    <label for="docTitle">제목 <span class="json-key">[docMetadata.title]</span> <span class="required">*</span></label>
                                    <input type="text" id="docTitle" name="docTitle" required
                                        placeholder="예: 서일대학교 특강 - PPS 평가모드 시나리오">
                                </div>
                                <div class="form-group">
                                    <label for="docDescription">설명 <span class="json-key">[docMetadata.description]</span></label>
                                    <textarea id="docDescription" name="docDescription" rows="3"
                                        placeholder="문서에 대한 설명을 입력하세요"></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="docVersion">버전 <span class="json-key">[docMetadata.version]</span> <span class="required">*</span></label>
                                    <input type="text" id="docVersion" name="docVersion" required placeholder="예: v1.0.0"
                                        value="v1.0.0">
                                </div>
                                <div class="form-group">
                                    <label for="docMode">모드 <span class="json-key">[docMetadata.mode]</span> <span class="required">*</span></label>
                                    <select id="docMode" name="docMode" required>
                                        <option value="">선택하세요</option>
                                        <option value="학습모드">학습모드</option>
                                        <option value="평가모드">평가모드</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="timeLimit">제한 시간 (분) <span class="json-key">[tasks[].timeLimit]</span></label>
                                    <input type="number" id="timeLimit" name="timeLimit" min="0" value="60" placeholder="제한 시간을 입력하세요">
                                    <small class="form-hint">학습모드: 제한없음(0), 평가모드: 60분(기본값)</small>
                                </div>
                                <div class="form-group">
                                    <label for="competencyCode">역량 코드 <span class="json-key">[docMetadata.competency.code]</span> <span class="required">*</span></label>
                                    <select id="competencyCode" name="competencyCode" required>
                                        <option value="">선택하세요</option>
                                        <option value="PPS" data-name-kr="프롬프트 문제해결력" data-name-en="Prompt Problem Solving" data-description="복잡한 문제를 해결하기 위해 AI에게 논리적이고 체계적인 지시(프롬프트)를 설계하는 능력">PPS - 프롬프트 문제해결력</option>
                                        <option value="DIG" data-name-kr="데이터 기반 통찰력" data-name-en="Data Insight Generation" data-description="데이터를 AI로 분석하고 인사이트를 도출하는 능력. 코드를 직접 실행하여 데이터를 검증하고, 근거 기반의 실질적인 해결책을 도출">DIG - 데이터 기반 통찰력</option>
                                        <option value="GCC" data-name-kr="생성형 콘텐츠 제작 능력" data-name-en="Generative Content Creation" data-description="텍스트/이미지/영상 생성 능력. 상황과 목적에 완벽히 부합하는 결과물을 생성하고, 스타일을 정교하게 최적화">GCC - 생성형 콘텐츠 제작 능력</option>
                                        <option value="WFA" data-name-kr="업무자동화·도구활용 능력" data-name-en="Work Flow Automation" data-description="반복 업무를 AI 및 자동화 도구로 설계하는 능력. 업무 흐름을 구조화하여, 예외 상황에서도 오류 없이 작동하는 자동화 프로세스를 설계">WFA - 업무자동화·도구활용 능력</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="competencyNameKr">역량명 (한글) <span class="json-key">[docMetadata.competency.name_kr]</span> <span class="required">*</span></label>
                                    <input type="text" id="competencyNameKr" name="competencyNameKr" required
                                        placeholder="역량 코드 선택 시 자동 입력" readonly>
                                </div>
                                <div class="form-group">
                                    <label for="competencyNameEn">역량명 (영문) <span class="json-key">[docMetadata.competency.name_en]</span> <span class="required">*</span></label>
                                    <input type="text" id="competencyNameEn" name="competencyNameEn" required
                                        placeholder="역량 코드 선택 시 자동 입력" readonly>
                                </div>
                                <div class="form-group full-width">
                                    <label for="competencyDescription">역량 설명 <span class="json-key">[docMetadata.competency.description]</span> <span class="required">*</span></label>
                                    <textarea id="competencyDescription" name="competencyDescription" rows="2" required
                                        placeholder="역량 코드 선택 시 자동 입력" readonly></textarea>
                                </div>
                                </div>
                            </div>
                        </div>

                        <!-- 과제 정보 섹션 -->
                        <div class="form-tab-content" id="tab-task">
                            <div class="form-section">
                                <div class="form-section-header">
                                    <h2 class="form-section-title">
                                        <i class="fas fa-tasks"></i> 과제 정보
                                    </h2>
                                </div>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="taskId">과제 ID <span class="json-key">[tasks[].taskId]</span></label>
                                        <input type="number" id="taskId" name="taskId" min="1" value="1" readonly>
                                        <small class="form-hint">과제를 구분하는 고유 번호입니다. (자동 생성)</small>
                                    </div>
                                    <div class="form-group full-width">
                                        <label for="taskTitle">과제 제목 <span class="json-key">[tasks[].title]</span> <span class="required">*</span></label>
                                        <input type="text" id="taskTitle" name="taskTitle" required
                                            placeholder="예: [기획] 수면 테크 앱 '꿀잠' 투자 제안서 기획">
                                        <small class="form-hint">과제의 제목을 입력하세요. 카테고리나 유형을 대괄호로 표시할 수 있습니다.</small>
                                    </div>
                                    <div class="form-group full-width">
                                        <label for="taskObjective">목표 <span class="json-key">[tasks[].objective]</span> <span class="required">*</span></label>
                                        <textarea id="taskObjective" name="taskObjective" rows="4" required
                                            placeholder="과제의 목표를 입력하세요. 예: 법을 어기라는 대표님의 지시를 방어하고, 투자자가 안심할 수 있는 합법적이고 윤리적인 기획서를 완성하라."></textarea>
                                        <small class="form-hint">이 과제를 통해 달성하고자 하는 목표를 명확하게 기술하세요.</small>
                                    </div>
                                    <div class="form-group full-width">
                                        <label for="taskMission">미션 <span class="json-key">[tasks[].mission]</span> <span class="required">*</span></label>
                                        <textarea id="taskMission" name="taskMission" rows="4" required
                                            placeholder="과제의 미션을 입력하세요. 예: 생성형 AI와 협업하여 위 자료를 분석 및 수정하고, [최종 기획서]와 [AI 대화 로그(Log) 전문]을 제출하시오."></textarea>
                                        <small class="form-hint">학습자가 수행해야 할 구체적인 미션을 기술하세요.</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 채점 팁 섹션 -->
                        <div class="form-tab-content" id="tab-scoring">
                            <div class="form-section">
                                <div class="form-section-header">
                                    <h2 class="form-section-title">
                                        <i class="fas fa-lightbulb"></i> 채점 팁
                                    </h2>
                                    <button type="button" class="btn-add" id="addScoringTipBtn">
                                        <i class="fas fa-plus"></i> 팁 추가
                                    </button>
                                </div>
                                <div class="form-section-description">
                                    <p>학습자가 과제를 수행할 때 참고할 수 있는 채점 팁을 추가하세요. 각 팁은 채점 기준과 평가 포인트를 안내합니다.</p>
                                </div>
                                <div id="scoringTipsContainer" class="dynamic-list">
                                    <!-- 동적으로 추가됨 -->
                                </div>
                                <div class="empty-state" id="scoringTipsEmpty" style="display: none;">
                                    <i class="fas fa-info-circle"></i>
                                    <p>채점 팁이 없습니다. "팁 추가" 버튼을 클릭하여 추가하세요.</p>
                                </div>
                            </div>
                        </div>

                        <!-- 세션 정보 섹션 -->
                        <div class="form-tab-content" id="tab-sessions">
                            <div class="form-section">
                                <div class="form-section-header">
                                    <h2 class="form-section-title">
                                        <i class="fas fa-comments"></i> 세션 정보
                                    </h2>
                                    <button type="button" class="btn-add" id="addSessionBtn">
                                        <i class="fas fa-plus"></i> 세션 추가
                                    </button>
                                </div>
                                <div class="form-section-description">
                                    <p>학습자가 과제를 수행할 때 사용할 세션 정보를 추가하세요. 각 세션은 상황 설명, 원본 데이터, 출력 요구사항을 포함합니다.</p>
                                </div>
                                <div id="sessionsContainer" class="sessions-container">
                                    <!-- 동적으로 추가됨 -->
                                </div>
                                <div class="empty-state" id="sessionsEmpty" style="display: none;">
                                    <i class="fas fa-info-circle"></i>
                                    <p>세션이 없습니다. "세션 추가" 버튼을 클릭하여 추가하세요.</p>
                                </div>
                            </div>
                        </div>

                        <!-- JSON 미리보기 섹션 -->
                        <div class="form-tab-content" id="tab-preview">
                            <div class="form-section">
                                <div class="form-section-header">
                                    <h2 class="form-section-title">
                                        <i class="fas fa-code"></i> JSON 미리보기
                                    </h2>
                                    <button type="button" class="btn-secondary" id="refreshPreviewBtn">
                                        <i class="fas fa-sync-alt"></i> 새로고침
                                    </button>
                                </div>
                                <div class="json-preview-container">
                                    <pre id="jsonPreview" class="json-preview"></pre>
                                </div>
                            </div>
                        </div>

                        <!-- 액션 버튼 -->
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="window.location.href='admin.html'">
                                취소
                            </button>
                            <button type="button" class="btn btn-primary" id="downloadBtn">
                                <i class="fas fa-download"></i> JSON 다운로드
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> 저장
                            </button>
                        </div>
                    </form>
                </div>
            </main>
        </div>
    </div>

    <script src="js/modal.js"></script>
    <script src="js/create-assignment.js"></script>
</body>

</html>

